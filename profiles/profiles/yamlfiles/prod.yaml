
app:

    secret:                     2246 Tudor
    host: &host                 profiles.216software.com
    scheme:                     http
    launch_debugger_on_error:   False
    webapp_port:                6660
    pidfile:                    /tmp/prod-profiles-webapp.pid
    num_webapp_workers:         1

postgresql:
    database:   &dbname profiles_prod
    user:       &dbuser profiles
    host:       &dbhost localhost
    port:       &dbport 5432
    password:   &dbpass pr0f1l3s

smtp:
    host: &smtphost  localhost

logging:

    default:

        # This is the catch-all.
        # root:
        #     level: DEBUG
        #     handlers: [console, textfile]

        loggers:
            pyprofiles: &defaultlogging
                propagate: False
                level: DEBUG
                # handlers: [console, pg, textfile]
                handlers: [console, textfile, email]

            werkzeug: *defaultlogging

            horsemeat: *defaultlogging

        disable_existing_loggers: false

        version: 1

        handlers:

            console:
                class: logging.StreamHandler
                level: DEBUG
                formatter: colorfmt

            pg:
                class:          logtopg.PGHandler
                level:          DEBUG
                log_table_name: profileslogs
                database:       *dbname
                host:           *dbhost
                user:           *dbuser
                password:       *dbpass

            textfile:
                class: logging.FileHandler
                filename: /var/log/profiles/pyprofiles.log
                mode: a
                level: DEBUG
                formatter: consolefmt

            email:
                level: CRITICAL
                formatter: consolefmt
                class: logging.handlers.SMTPHandler
                mailhost: *smtphost

                fromaddr: profiles@profiles.216software.com

                toaddrs:
                    - info@216software.com

                subject: production error

        formatters:
            consolefmt:
                format: '%(asctime)-22s [%(process)d] %(name)-30s %(lineno)-5d %(levelname)-8s %(message)s'

            colorfmt:
                (): "colorlog.ColoredFormatter"

                # format: "%(log_color)s%(levelname)-8s%(reset)s %(blue)s%(message)s"

                format: "%(log_color)s%(asctime)-22s [%(process)d] %(name)-30s %(lineno)-5d %(levelname)-8s %(message)s"

    script:

        # This is the catch-all.
        # root:
        #     level: DEBUG
        #     handlers: [console, textfile]

        loggers:
            pyprofiles: &scriptlogging
                propagate: False
                level: DEBUG
                # handlers: [console, pg, textfile]
                handlers: [console, textfile]

            werkzeug: *scriptlogging

            horsemeat: *scriptlogging

        disable_existing_loggers: false

        version: 1

        handlers:

            console:
                class: logging.StreamHandler
                level: WARNING
                formatter: colorfmt

            pg:
                class:          logtopg.PGHandler
                level:          DEBUG
                log_table_name: profileslogs
                database:       *dbname
                host:           *dbhost
                user:           *dbuser
                password:       *dbpass

            textfile:
                class: logging.FileHandler
                filename: /var/log/profiles/pyprofiles.log
                mode: a
                level: DEBUG
                formatter: consolefmt

            email:
                level: CRITICAL
                formatter: consolefmt
                class: logging.handlers.SMTPHandler
                mailhost: *smtphost

                fromaddr: pyprofiles@*host

                toaddrs:
                    - matt@216software.com
                    # - robert.heinen@gmail.com

                subject: production error

        formatters:
            consolefmt:
                format: '%(asctime)-22s [%(process)d] %(name)-30s %(lineno)-5d %(levelname)-8s %(message)s'


            colorfmt:
                (): "colorlog.ColoredFormatter"

                # format: "%(log_color)s%(levelname)-8s%(reset)s %(blue)s%(message)s"

                format: "%(log_color)s%(asctime)-22s [%(process)d] %(name)-30s %(lineno)-5d %(levelname)-8s %(message)s"

rackspace:
    username:   stratqor
    apikey:     f8a7b492c4ac40b5a877f79116aaae91
    region:     ORD
    # get temp key like this:
    # pyrax.cloudfiles._manager.api.get_temp_url_key()
    tempurlkey: d85808a843541fc72c5ab0a1a1a00d46
    # get management key like this:
    # pyrax.cloudfiles._manager.api.management_url
    mgmt_url:   https://storage101.iad3.clouddrive.com/v1/MossoCloudFS_949731

# This is stuff just for this project
profiles:

    csv_data_files_folder: /home/communityprofiles/checkouts/Profiles/datafiles/csvfiles


# vim: set filetype=yaml :
